<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	
	<style>
		#game{
			display: flex;
			flex-flow: row wrap;
			width: 310px;
			margin: 100px auto; 
		}
		.square{
			width: 100px;
			height: 100px;
			border: 1px solid black;
			text-align: center;
			font-size: 60px;
			line-height: 100px;
		}

	</style>
</head>
<body>

	<div class="stats">Current player is X </div>
	<button class="restart">Restart game</button>
	<div id="game">
	</div>
	


<script src="https://code.jquery.com/jquery-3.6.4.min.js" integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
<script>

let squares = ['', '', '', '', '', '', '', '', ''];
const game = $('#game');
let isActiveX = true;

function init(){
	game.text('');
	squares.forEach((item, index)=>{
		game.append(`<div data-index="${index}" class="square">${item}</div>`);
	});
}
init();


$('.square').click(function(){
	doTurn($(this));
});


function doTurn(el){
	console.log(111);
	if($(el).text() == ''){	
		let current = isActiveX ? 'X' : 'O';
		$(el).text(current);
		squares[$(el).attr('data-index')] = current;
		isActiveX = !isActiveX;
		$('.stats').text(`Current player is ${isActiveX ? 'X' : 'O'}`);
		checkGameOver();
		checkWinner();
	}
}


function checkGameOver(){
	if(!squares.includes('')){
		$('.stats').text('All full');
	}
}

function checkWinner(){
	if(	squares[0] == squares[1] && squares[1] == squares[2] && squares[0] != '' ||
	squares[3] == squares[4] && squares[4] == squares[5] && squares[3] != ''  ||
	squares[6] == squares[7] && squares[7] == squares[8] && squares[6] != '' || 
	squares[0] == squares[4] && squares[4] == squares[8] && squares[4] != '' ||
	squares[2] == squares[4] && squares[4] == squares[6] && squares[6] != '' ||
	squares[0] == squares[3] && squares[3] == squares[6] && squares[0] != '' ||
	squares[1] == squares[4] && squares[4] == squares[7] && squares[7] != ''  ||
	squares[2] == squares[5] && squares[5] == squares[8] && squares[5] != '' ){
		$('.stats').text(`${isActiveX ? 'O' : 'X'} Won!`);
		squares.fill(''); // очищаем массив старых значений
		isActiveX = true;
		$('.stats').text(`Current player is ${isActiveX ? 'X' : 'O'}`);
		init();
	}
}

	// $('.restart').click(function(){
		
	// });


</script>


</body>
</html>