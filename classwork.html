<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
</head>
<body>
	Hello world!



<script>

 // oop


 class Book {
	static bookCount = 0;
	static countBooks(){
		Book.bookCount++;
		console.log(`Total number of books ${Book.bookCount}`);
	}

	constructor(name, author){
		this.name = name;
		this.author = author;

		Book.countBooks();
	}
 }

 let book1 = new Book('Dzherelo', 'Ain Rend');
 let book2 = new Book('The Hobbit', 'J. Tolkien');


 class CoffeeMachine{
	_waterAmount = 0;
	#waterLimit = 1000;

	constructor (name, power){
		this.name = name;
		this._power = power;

		console.log(`Was created coffemachine ${this.name} with power ${this.power}wt`);
	}
	// set waterAmount(amount){
	// 	this._waterAmount += amount;
	// }
	// get waterAmount(){
	// 	console.log(this._waterAmount);
	// }

	#fixWaterAmount(value){
		if(value < 0){
			return 0;
		}
		else if(value > this.#waterLimit) {
			return this.#waterLimit;
		}
		else{
			return value;
		}
	}

	setWaterAmount(amount){
		this.#waterLimit = this.#fixWaterAmount(amount);
	}
 }

 let saeco = new CoffeeMachine('saeco', 1000);

 // saeco.#waterLimit // Private field '#waterLimit' must be declared in an enclosing class


// OOP Design Patterns

// singleton

class ActiveUser{
	static instance = null;
	static objects = [];
	constructor(name, role){
		if(ActiveUser.instance === null){
			this.name = name;
			this.role = role;
			ActiveUser.instance = this;
		}
		else{
			return ActiveUser.instance;
		}
	}

	logout(){
		ActiveUser.instance = null;
	}
}

let u1 = new ActiveUser('Masha', 'Copywriter');
let u2 = new ActiveUser('Dasha', 'Admin');


// factory

class Car{
	constructor(options){
		this.state = options.state || 'new';
		this.color = options.color || 'black'
	}
}
class Truck{
	constructor(options){
		this.state = options.state || 'used';
		this.color = options.color || 'gray'
	}
}

class VehicleFactory{
	createVehicle(options){
		if(options.type === 'car'){
			return new Car(options);
		}
		else{
			return new Truck(options);
		}
	}
}

let factory = new VehicleFactory();

let vehicle1 = factory.createVehicle({type: 'car', color: 'blue'});
let vehicle2 = factory.createVehicle({});




</script>

<script type="module" src="common.js"></script>

</body>
</html>