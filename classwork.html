<!DOCTYPE html>
<html lang="en">
<head>
	<title>JS FE</title> 
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"> 
</head>
<body>
	Hello world!



<script>

 // ... + деструктуризации

 let fullname = ['John', 'Doe'];
 let [firstname, lastname] = fullname; // let firstname = fullname[0], lastname = fullname[1];


 let user = ['Mary', 'Peterson', '22.02.1992', 'admin', 'copywriter'];
 let [username, , , role, reason] = user;

 let parameters = [100, 80, 70, 'oak', 'white'];
 let [length, w, h, ...details] = parameters;

 function destructParams(){
	let [p1, p2, ...rest] = arguments;
	console.log(`p1 ${p1}, p2 ${p2}, ${rest}`);
 }

 destructParams(1,2,3,4,5);


 // data change

 let a = 1;
let b = 2;

[a, b] = [b, a]; // swap values with destructuring


// obj destr

let options = {
	name: 'Popup',
	width: 600,
	height: 350
}

let {name, width, height} = options;

let {width: w1, height: h1, name: title} = options;

let admin = {
	login: 'Admin',
	pass: 12345,
	lastLogin: '1.1.2023',
	location: 'LA',
	browser: 'Safari 13'
}

let {login, pass, ...adminInfo} = admin;

// * можно использовать вложенную деструктуризацию 

let sweets = {
	pastryChef: 'No Name',
	cakes: ['red velvet', 'victoria`s sponge cake', 'prague'],
	additionalSweets: {
		cook: ['american', 'whoopie', 'biscotti'],
		desserts: ['choux', {
			eclairs: ['chocolate', 'almond', 'vanilla', 'coffee']
		}]
	}
}
let {cakes: [cake1, cake2, cake3], additionalSweets: {cook, desserts: [, {eclairs: [...eclairTastes]}]} } = sweets;

let tastes = sweets.additionalSweets.desserts.eclairs; // так проще и понятнее для себя. деструктуризация не должна вам усложнять жизнь


// Map, Set, WeakMap, WeakSet

let u = new Map();

u.set('name', 'Ann');
u.set('city', 'Kh');
u.set('hobbys', ['JS', 'HTML', 'CSS']);

console.log(u.size);


// set()
// delete()
// clear()
// get()
// has()
// forEach()
// keys() values() entries()

for(let data of u.entries()){
	console.warn(`u: ${data}`);
}


// set

let numbers = new Set();

while(numbers.size < 10){
	let newnum = Math.ceil(Math.random()*10);
	numbers.add(newnum);
}

console.log(numbers);

// has()
// add()
// clear()
// delete()
// entries()  (keys and values are equal) keys() values() 
// forEach()
// size


// ... остаточные параметры  и расширение

let x = Math.max(1,12,3,4,5,22,32,6);
console.log(x);

function maxOfArrays(arr){
	return arr.map(item => Math.max(...item));
}

console.log(maxOfArrays([[1,12,3,8], [32,45,2,87], [1000, 23,4,12], [65, 41, 88]]));


let arr = [1,2,3,4,5,6];
console.log(Math.max(...arr));

function sum(){
	let sum = 0;
	for(let num of arguments){
		sum += num;
	}
	console.log(sum);
}

sum(1,2,3,4,5);
sum(...arr);

function greeting(name, message, ...rest){
	console.log(rest);
	console.log(`${message}! My name is ${name}. Additional info about me: ${rest.join('/')}`);
}

greeting('Masha', 'Hi', '18 years old', 'Living in Kharkiv', 'Playing chess');


// call() apply() bind()

// call(context, arg1, arg2...argN)

function sayHi(){
	console.warn(`Hi! My name is ${this.firstname}`);
}
sayHi();

let student = {
	firstname: 'Ann',
	course: 'JS'
}

sayHi.call(student);

function hasThreePassed(){
	console.log([].includes.call(arguments, 3));
}

hasThreePassed(1,2,3,4,5);

// apply(context, [args])
function printArr(arr){
	// console.log(`is array ${Array.isArray(arr)}`);
	console.log(`is array ${Array.isArray.call(arguments)}`);
}

// printArr([1,2,3]);
// printArr({name: 'a'});
printArr(1,2,3);


// bind()

let studentSayHi = sayHi.bind(student);
studentSayHi();

let siteAdmin = {
	firstname: 'Admin',
	lastname: 'Admin',
	sayHi(){
		console.log(`Hi! I am ${this.firstname}`);
	}
}

let adminSayHi = sayHi.bind(siteAdmin);
adminSayHi();

siteAdmin.sayHi();
setTimeout(siteAdmin.sayHi, 1000);

// fixes content issue

setTimeout(() => {siteAdmin.sayHi()}, 1000);
setTimeout(siteAdmin.sayHi.call(siteAdmin), 1000);

</script>

</body>
</html>